<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Puter.js Claude AI Playground</title>
<script src="https://js.puter.com/v2/"></script>
<!-- Lightweight Markdown parser -->
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
<style>
    body {
        font-family: 'Segoe UI', sans-serif;
        background-color: #101010;
        color: #f5f5f5;
        margin: 0;
        padding: 2rem;
    }
    h1 {
        text-align: center;
        color: #00bcd4;
    }
    #controls {
        display: flex;
        flex-direction: column;
        gap: 1rem;
        max-width: 700px;
        margin: 1rem auto;
    }
    textarea {
        width: 100%;
        height: 100px;
        background: #1e1e1e;
        color: #fff;
        border: 1px solid #444;
        border-radius: 8px;
        padding: 0.8rem;
        resize: vertical;
    }
    select, button {
        padding: 0.6rem 1rem;
        font-size: 1rem;
        border-radius: 6px;
        border: none;
    }
    select {
        background: #222;
        color: #fff;
    }
    button {
        background: #00bcd4;
        color: #000;
        font-weight: bold;
        cursor: pointer;
        transition: 0.2s;
    }
    button:hover {
        background: #0097a7;
    }
    #output {
        background: #1e1e1e;
        border: 1px solid #333;
        border-radius: 8px;
        padding: 1rem;
        margin-top: 2rem;
        min-height: 200px;
        max-width: 700px;
        margin-left: auto;
        margin-right: auto;
        overflow-y: auto;
    }
    #output h1, #output h2, #output h3 {
        color: #00bcd4;
    }
    #output code {
        background: #222;
        color: #0f0;
        padding: 2px 5px;
        border-radius: 4px;
    }
    #output pre {
        background: #222;
        padding: 10px;
        border-radius: 6px;
        overflow-x: auto;
    }
</style>
</head>
<body>

<h1>Claude AI via Puter.js</h1>

<div id="controls">
    <textarea id="prompt" placeholder="Type your question or command...">Explain quantum computing in simple terms</textarea>

    <select id="model">
        <option value="claude-sonnet-4">Claude Sonnet 4</option>
        <option value="claude-opus-4">Claude Opus 4</option>
        <option value="claude-opus-4-1">Claude Opus 4.1</option>
        <option value="claude-sonnet-4-5">Claude Sonnet 4.5</option>
        <option value="claude-3-7-sonnet">Claude 3.7 Sonnet</option>
        <option value="claude-3-7-opus">Claude 3.7 Opus</option>
    </select>

    <div style="display:flex; gap:1rem;">
        <button id="generateBtn">Generate</button>
        <button id="streamBtn">Stream</button>
    </div>
</div>

<div id="output">AI output will appear here...</div>

<script>
const promptEl = document.getElementById('prompt');
const modelEl = document.getElementById('model');
const outputEl = document.getElementById('output');
const generateBtn = document.getElementById('generateBtn');
const streamBtn = document.getElementById('streamBtn');

// Helper: render markdown to HTML safely
function renderMarkdown(text) {
    return marked.parse(text);
}

// Basic non-streaming generation
generateBtn.addEventListener('click', async () => {
    outputEl.innerHTML = "<em>Generating response...</em>";
    const query = promptEl.value.trim();
    const model = modelEl.value;

    try {
        const response = await puter.ai.chat(query, { model: model });
        const content = response.message?.content?.[0]?.text || response;
        outputEl.innerHTML = renderMarkdown(content);
    } catch (err) {
        outputEl.textContent = "Error: " + err.message;
    }
});

// Streaming mode for long responses
streamBtn.addEventListener('click', async () => {
    outputEl.innerHTML = "";
    const query = promptEl.value.trim();
    const model = modelEl.value;
    let collected = "";

    try {
        const stream = await puter.ai.chat(query, { model: model, stream: true });
        for await (const chunk of stream) {
            if (chunk?.text) {
                collected += chunk.text;
                outputEl.innerHTML = renderMarkdown(collected);
                outputEl.scrollTop = outputEl.scrollHeight;
            }
        }
    } catch (err) {
        outputEl.textContent = "Error: " + err.message;
    }
});
</script>

</body>
</html>
